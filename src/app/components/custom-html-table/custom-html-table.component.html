<div class="flex flex-col w-fit">
  <table>
    <thead>
      <tr>
        <th colspan="2"></th>
        <th [colSpan]="columnData.length" class="bg-green-600">{{"options" | titlecase}}</th>
      </tr>
      <tr cdkDropList cdkDropListOrientation="horizontal" (cdkDropListDropped)="columnDropMethod($event)">
        <th>{{"criteria" | titlecase}}</th>
        <th>{{"weight" | titlecase}}</th>
        <ng-container *ngFor="let column of columnData; let colIdx = index;">
          <th *ngIf="colIdx !== headerBeingModified else headerRenameInputComponent" class="draggable-cell" cdkDrag
            (mousedown)="$event.stopPropagation();" cdkDragLockAxis="x" (dblclick)="renameColumnHeader(colIdx)">
            {{column.columnName| titlecase
            }}</th>
        </ng-container>
        <button class="opacity-40 hover:opacity-100" mat-icon-button color="primary" (click)="addCandidate()">
          <mat-icon>add</mat-icon>
        </button>
      </tr>
    </thead>
    <tbody cdkDropList (cdkDropListDropped)="rowDropMethod($event)">
      <tr cdkDrag *ngFor="let row of tableData; let weightIndex = index;" class="table-row">
        <th class="text-left">{{row.fieldName}}</th>
        <td class="text-center text-blue-600">{{row.fieldWeight}}</td>
        <td class="text-blue-600 text-center w-20" *ngFor="let item of row.fieldValues">
          {{item}}
        </td>
        <!-- <input class="border-solid" *ngFor="let item of row.fieldValues" mat-input title="fuck" label="what-ever"
      type="number"> -->
      </tr>

      <tr *ngIf="displayResults">
        <th colspan="2">{{"results" | titlecase}}</th>
        <td>777</td>
        <td>888</td>
      </tr>
      <tr>
        <th class="add-criterion" [colSpan]="columnData.length + 2">
          <div class="button-container">
            <button (click)="addRow()" mat-flat-button color="white" class="opacity-40 hover:opacity-100">
              <mat-icon>add</mat-icon>
              {{"add criterion" | titlecase}}
            </button>
            <button class="ml-4" mat-mini-fab color="primary" (click)="displayResults=true">
              <mat-icon>calculate</mat-icon>
            </button>
          </div>
        </th>
      </tr>
    </tbody>
    <tfoot>
    </tfoot>
  </table>
</div>

<ng-template #headerRenameInputComponent>
  <input #columnHeaderInput matInput placeholder="option name..." (keydown.enter)="submitForm()"
    [formControl]="columnHeaderRenamingFormControl" label="header-rename" type="text" />
</ng-template>